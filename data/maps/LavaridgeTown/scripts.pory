raw `
.set LOCALID_RIVAL_ON_BIKE, 7
.set LOCALID_RIVAL, 8

LavaridgeTown_EventScript_ClearLavaridgeWhiteOut::
	clearflag FLAG_WHITEOUT_TO_LAVARIDGE
	return

LavaridgeTown_EventScript_ShowMtChimneyTrainers::
	clearflag FLAG_HIDE_MT_CHIMNEY_TRAINERS
	return

LavaridgeTown_EventScript_HideMapNamePopup::
	setflag FLAG_HIDE_MAP_NAME_POPUP
	return

LavaridgeTown_EventScript_RivalGiveGoGoggles::
	lockall
	getplayerxy VAR_0x8008, VAR_0x8009
	call_if_eq VAR_0x8008, 9, LavaridgeTown_EventScript_RivalNoticePlayer
	call_if_ne VAR_0x8008, 9, LavaridgeTown_EventScript_RivalExitHerbShop
	delay 20
	checkplayergender
	call_if_eq VAR_RESULT, MALE, LavaridgeTown_EventScript_PlayMayMusic
	call_if_eq VAR_RESULT, FEMALE, LavaridgeTown_EventScript_PlayBrendanMusic
	call_if_eq VAR_0x8008, 9, LavaridgeTown_EventScript_RivalApproachPlayer1
	call_if_ne VAR_0x8008, 9, LavaridgeTown_EventScript_RivalApproachPlayer2
	checkplayergender
	goto_if_eq VAR_RESULT, MALE, LavaridgeTown_EventScript_MayGiveGoGoggles
	goto_if_eq VAR_RESULT, FEMALE, LavaridgeTown_EventScript_BrendanGiveGoGoggles
	end

LavaridgeTown_EventScript_MayGiveGoGoggles::
	msgbox LavaridgeTown_Text_MayNiceBadgesTakeThis, MSGBOX_DEFAULT
	giveitem ITEM_GO_GOGGLES
	setflag FLAG_RECEIVED_GO_GOGGLES
	msgbox LavaridgeTown_Text_MayExplainGoGogglesChallengeDad, MSGBOX_DEFAULT
	goto LavaridgeTown_EventScript_RivalExit
	end

LavaridgeTown_EventScript_BrendanGiveGoGoggles::
	msgbox LavaridgeTown_Text_BrendanNiceBadgesTakeThis, MSGBOX_DEFAULT
	giveitem ITEM_GO_GOGGLES
	setflag FLAG_RECEIVED_GO_GOGGLES
	msgbox LavaridgeTown_Text_BrendanExplainGoGogglesChallengeDad, MSGBOX_DEFAULT
	goto LavaridgeTown_EventScript_RivalExit
	end

LavaridgeTown_EventScript_RivalExit::
	closemessage
	removeobject LOCALID_RIVAL
	addobject LOCALID_RIVAL_ON_BIKE
	delay 30
	call_if_eq VAR_0x8008, 9, LavaridgeTown_EventScript_RivalExit1
	call_if_ne VAR_0x8008, 9, LavaridgeTown_EventScript_RivalExit2
	removeobject LOCALID_RIVAL_ON_BIKE
	setvar VAR_LAVARIDGE_TOWN_STATE, 2
	clearflag FLAG_HIDE_MAP_NAME_POPUP
	savebgm MUS_DUMMY
	fadedefaultbgm
	releaseall
	end

LavaridgeTown_EventScript_PlayMayMusic::
	playbgm MUS_ENCOUNTER_MAY, TRUE
	return

LavaridgeTown_EventScript_PlayBrendanMusic::
	playbgm MUS_ENCOUNTER_BRENDAN, TRUE
	return

LavaridgeTown_EventScript_RivalNoticePlayer::
	applymovement LOCALID_RIVAL, Common_Movement_WalkInPlaceFasterUp
	waitmovement 0
	playse SE_PIN
	applymovement LOCALID_RIVAL, Common_Movement_ExclamationMark
	waitmovement 0
	applymovement LOCALID_RIVAL, Common_Movement_Delay48
	waitmovement 0
	return

LavaridgeTown_EventScript_RivalExitHerbShop::
	opendoor 12, 15
	waitdooranim
	addobject LOCALID_RIVAL
	applymovement LOCALID_RIVAL, LavaridgeTown_Movement_RivalExitHerbShop
	waitmovement 0
	closedoor 12, 15
	waitdooranim
	applymovement LOCALID_RIVAL, Common_Movement_WalkInPlaceFasterLeft
	waitmovement 0
	playse SE_PIN
	applymovement LOCALID_RIVAL, Common_Movement_ExclamationMark
	waitmovement 0
	applymovement LOCALID_RIVAL, Common_Movement_Delay48
	waitmovement 0
	applymovement OBJ_EVENT_ID_PLAYER, Common_Movement_WalkInPlaceFasterRight
	waitmovement 0
	return

LavaridgeTown_EventScript_RivalApproachPlayer1::
	applymovement LOCALID_RIVAL, LavaridgeTown_Movement_RivalApproachPlayer1
	waitmovement 0
	return

LavaridgeTown_EventScript_RivalApproachPlayer2::
	applymovement LOCALID_RIVAL, LavaridgeTown_Movement_RivalApproachPlayer2
	waitmovement 0
	return

LavaridgeTown_EventScript_RivalExit1::
	applymovement OBJ_EVENT_ID_PLAYER, LavaridgeTown_Movement_PlayerWatchRivalExit
	applymovement LOCALID_RIVAL_ON_BIKE, LavaridgeTown_Movement_RivalExit1
	waitmovement 0
	return

LavaridgeTown_EventScript_RivalExit2::
	applymovement LOCALID_RIVAL_ON_BIKE, LavaridgeTown_Movement_RivalExit2
	waitmovement 0
	return

LavaridgeTown_Movement_RivalExit2:
	walk_fast_right
	walk_fast_right
	walk_fast_right
	walk_fast_up
	walk_fast_up
	walk_fast_up
	walk_fast_up
	walk_fast_up
	walk_fast_up
	walk_fast_up
	step_end

LavaridgeTown_Movement_PlayerWatchRivalExit:
	delay_16
	delay_8
	walk_in_place_faster_right
	step_end

LavaridgeTown_Movement_RivalExit1:
	walk_fast_down
	walk_fast_right
	walk_fast_right
	walk_fast_right
	walk_fast_right
	walk_fast_right
	walk_fast_right
	walk_fast_right
	walk_fast_right
	step_end

LavaridgeTown_Movement_RivalApproachPlayer2:
	walk_left
	walk_left
	walk_left
	walk_left
	walk_left
	walk_left
	step_end

LavaridgeTown_Movement_RivalApproachPlayer1:
	walk_left
	walk_left
	walk_up
	step_end

LavaridgeTown_Movement_RivalExitHerbShop:
	walk_down
	step_end

LavaridgeTown_EventScript_HotSpringsTrigger::
	specialvar VAR_RESULT, GetPlayerFacingDirection
	goto_if_eq VAR_RESULT, DIR_SOUTH, LavaridgeTown_EventScript_EnteredHotSprings
	end

LavaridgeTown_EventScript_EnteredHotSprings::
	incrementgamestat GAME_STAT_ENTERED_HOT_SPRINGS
	end

LavaridgeTown_EventScript_ExpertM::
	msgbox LavaridgeTown_Text_HotSpringsNeverRunDry, MSGBOX_NPC
	end

LavaridgeTown_EventScript_OldMan::
	msgbox LavaridgeTown_Text_PokemonNippedBackside, MSGBOX_SIGN
	end

LavaridgeTown_EventScript_Twin::
	msgbox LavaridgeTown_Text_BatheInHotSpringsEveryDay, MSGBOX_NPC
	end

LavaridgeTown_EventScript_HotSpringsOldWoman1::
	msgbox LavaridgeTown_Text_IfPokemonInHotSprings, MSGBOX_NPC
	end

LavaridgeTown_EventScript_HotSpringsOldWoman2::
	msgbox LavaridgeTown_Text_HotSpringsClaims, MSGBOX_NPC
	end

LavaridgeTown_EventScript_ExpertF::
	msgbox LavaridgeTown_Text_OhYouLikeHotSprings, MSGBOX_NPC
	end

LavaridgeTown_EventScript_EggWoman::
	lock
	faceplayer
	goto_if_set FLAG_RECEIVED_LAVARIDGE_EGG, LavaridgeTown_EventScript_ReceivedEgg
	msgbox LavaridgeTown_Text_HaveEggWillYouTakeIt, MSGBOX_YESNO
	goto_if_eq VAR_RESULT, NO, LavaridgeTown_EventScript_DeclineEgg
	getpartysize
	goto_if_eq VAR_RESULT, PARTY_SIZE, LavaridgeTown_EventScript_NoRoomForEgg
	msgbox LavaridgeTown_Text_HopeYoullWalkPlentyWithEgg, MSGBOX_DEFAULT
	setflag FLAG_RECEIVED_LAVARIDGE_EGG
	playfanfare MUS_OBTAIN_ITEM
	message LavaridgeTown_Text_ReceivedTheEgg
	waitfanfare
	giveegg SPECIES_WYNAUT
	release
	end

LavaridgeTown_EventScript_ReceivedEgg::
	msgbox LavaridgeTown_Text_EverySoOftenEggFoundAtDayCare, MSGBOX_DEFAULT
	release
	end

LavaridgeTown_EventScript_NoRoomForEgg::
	msgbox LavaridgeTown_Text_NoRoomForThisEgg, MSGBOX_DEFAULT
	release
	end

LavaridgeTown_EventScript_DeclineEgg::
	msgbox LavaridgeTown_Text_AsYouWishThen, MSGBOX_DEFAULT
	release
	end

LavaridgeTown_EventScript_TownSign::
	msgbox LavaridgeTown_Text_TownSign, MSGBOX_SIGN
	end

LavaridgeTown_EventScript_GymSign::
	msgbox LavaridgeTown_Text_GymSign, MSGBOX_SIGN
	end

LavaridgeTown_EventScript_HerbShopSign::
	msgbox LavaridgeTown_Text_HerbShopSign, MSGBOX_SIGN
	end

LavaridgeTown_Text_MayNiceBadgesTakeThis:
	.string "MAY: {PLAYER}{KUN}! Long time no see!\p"
	.string "Oh? While I visited the hot springs,\n"
	.string "you got the LAVARIDGE GYM BADGE.\p"
	.string "You must have collected\n"
	.string "good POKéMON…\l"
	.string "No, I believe you raised some.\p"
	.string "I guess it would be okay for you to\n"
	.string "have this.$"

LavaridgeTown_Text_MayExplainGoGogglesChallengeDad:
	.string "MAY: With those GO-GOGGLES, you'll\n"
	.string "have no trouble getting through the\l"
	.string "desert near ROUTE 111.\p"
	.string "But, wow, {PLAYER}{KUN}…\n"
	.string "Challenging GYMS…\p"
	.string "You're trying hard because you don't\n"
	.string "want to lose to me, I bet!\p"
	.string "{PLAYER}{KUN}, I think I should challenge\n"
	.string "your dad in PETALBURG GYM.\p"
	.string "See you again!$"

LavaridgeTown_Text_BrendanNiceBadgesTakeThis:
	.string "BRENDAN: {PLAYER}, hey, it's been a while.\n"
	.string "How's it going?\p"
	.string "Hmm…\n"
	.string "That's a decent collection of BADGES.\p"
	.string "All right, then.\n"
	.string "You may as well have this.$"

LavaridgeTown_Text_BrendanExplainGoGogglesChallengeDad:
	.string "BRENDAN: Keep those with you if you're\n"
	.string "planning on going into that desert near\l"
	.string "ROUTE 111.\p"
	.string "There should be some POKéMON that\n"
	.string "are exclusively desert-dwellers.\l"
	.string "You might look around for those.\p"
	.string "As for me…\n"
	.string "I'm considering challenging NORMAN,\l"
	.string "the GYM LEADER of PETALBURG.\p"
	.string "Unlike you, {PLAYER}, your dad looks like\n"
	.string "he really is tough.\p"
	.string "See you around!$"

LavaridgeTown_Text_HaveEggWillYouTakeIt:
	.string "I have here an EGG.\p"
	.string "I'd hoped to hatch it by covering it in\n"
	.string "hot sand by the hot springs.\l"
	.string "But that doesn't seem to be enough…\p"
	.string "I've heard it would be best if it were\n"
	.string "kept together with POKéMON and\l"
	.string "carried about.\p"
	.string "You are a TRAINER, yes?\n"
	.string "And your POKéMON radiate vitality.\p"
	.string "So, what say you?\n"
	.string "Will you take this EGG to hatch?$"

LavaridgeTown_Text_HopeYoullWalkPlentyWithEgg:
	.string "Good! I hope you'll walk plenty with\n"
	.string "this here EGG!$"

LavaridgeTown_Text_ReceivedTheEgg:
	.string "{PLAYER} received the EGG.$"

LavaridgeTown_Text_NoRoomForThisEgg:
	.string "Oh? You've too many POKéMON.\n"
	.string "There's no room for this EGG…$"

LavaridgeTown_Text_AsYouWishThen:
	.string "As you wish, then…\p"
	.string "If you have a change of heart about\n"
	.string "hatching this EGG, I will be here.$"

LavaridgeTown_Text_EverySoOftenEggFoundAtDayCare:
	.string "Every so often, an EGG will be found at\n"
	.string "the POKéMON DAY CARE.\p"
	.string "Or at least that's how the rumor goes.$"

LavaridgeTown_Text_HotSpringsNeverRunDry:
	.string "We draw as much hot water as we need,\n"
	.string "and yet the hot springs never run dry.\p"
	.string "Isn't it magical?\p"
	.string "These hot springs appear near active\n"
	.string "volcanoes. Veins of water under the\l"
	.string "ground are heated by magma to well up\l"
	.string "as hot springs.$"

LavaridgeTown_Text_PokemonNippedBackside:
	.string "Being buried in this hot sand is…\n"
	.string "Sigh…\p"
	.string "So warm and heavenly…\p"
	.string "Eh? Gyaah! Ouch!\p"
	.string "A POKéMON nipped my backside!$"

LavaridgeTown_Text_OhYouLikeHotSprings:
	.string "Oh, you like hot springs, do you?\p"
	.string "That's surprising for one as young\n"
	.string "as you.$"

LavaridgeTown_Text_BatheInHotSpringsEveryDay:
	.string "I bathe in the hot springs every day.\p"
	.string "I want to become a beautiful and strong\n"
	.string "GYM LEADER like FLANNERY.$"

LavaridgeTown_Text_IfPokemonInHotSprings:
	.string "If people put POKéMON in hot springs,\n"
	.string "it might be seriously strange.\p"
	.string "Why, it might be an electric bath, or\n"
	.string "a bubble bath, or even a lava bath…$"

LavaridgeTown_Text_HotSpringsClaims:
	.string "They're claiming that these hot springs\n"
	.string "are good for calming nervous tension,\l"
	.string "relieving aching muscles, solving\l"
	.string "romantic problems, and attracting\l"
	.string "money…$"

LavaridgeTown_Text_TownSign:
	.string "LAVARIDGE TOWN\p"
	.string "“POKéMON CENTER HOT SPRINGS\n"
	.string "An excellent place for relaxing!”$"

LavaridgeTown_Text_GymSign:
	.string "LAVARIDGE TOWN POKéMON GYM\n"
	.string "LEADER: FLANNERY\l"
	.string "“One with a fiery passion that burns!”$"

LavaridgeTown_Text_HerbShopSign:
	.string "POKéMON HERB SHOP\n"
	.string "“Bitter taste--better cure!”$"
`
const LOCALID_FLANNERY = 8
const LOCALID_RUTH = 9
const TEMP_FLAG_HIDE_FLANNERY = FLAG_TEMP_10

mapscripts LavaridgeTown_MapScripts {
    MAP_SCRIPT_ON_TRANSITION: LavaridgeTown_OnTransition
	MAP_SCRIPT_ON_LOAD: LavaridgeTown_OnLoad
}


script LavaridgeTown_OnTransition {
	setflag(FLAG_VISITED_LAVARIDGE_TOWN)
	if (flag(FLAG_WHITEOUT_TO_LAVARIDGE)) {
		call(LavaridgeTown_EventScript_ClearLavaridgeWhiteOut)
	}
	if (flag(FLAG_DEFEATED_EVIL_TEAM_MT_CHIMNEY)) {
		call (LavaridgeTown_EventScript_ShowMtChimneyTrainers)
	}
	setflag(TEMP_FLAG_HIDE_FLANNERY)
	end
}

script LavaridgeTown_OnLoad {
	if (var(VAR_LAVARIDGE_TOWN_STATE) <= 2) {
		call (LavaridgeTown_EventScript_LockGymDoor)
	}
	return
}

script LavaridgeTown_EventScript_LockGymDoor {
	setmetatile(5, 15, METATILE_Lavaridge_GymDoor_Closed, TRUE)
	end
}

script EventScript_ClosedLavaridgeGymDoor {
	msgbox("The door is closed.", MSGBOX_SIGN)
	closemessage
	if (var(VAR_LAVARIDGE_TOWN_STATE) == 0) {
		applymovement(LOCALID_RUTH, Common_Movement_WalkInPlaceRight)
		waitmovement(0)
		msgbox(format("Hey, {PLAYER}…\pLooks like we can't challenge the Fire-type gym yet, the door's closed."))
		goto(LavaridgeTown_EventScript_FlanneryGymLeaderGoneScene)
	}
	end
}

script LavaridgeTown_EventScript_Ruth {
	lock
	faceplayer
		speakername(CommonName_Ruth)
	if (var(VAR_LAVARIDGE_TOWN_STATE) == 0) {
		msgbox(format("Hey, {PLAYER}…\pLooks like we can't challenge the Fire-type gym yet, the door's closed."))
		closemessage
		clearflag(TEMP_FLAG_HIDE_FLANNERY)
		addobject(LOCALID_FLANNERY)
		showobjectat(LOCALID_FLANNERY, MAP_LAVARIDGE_TOWN)
		goto(LavaridgeTown_EventScript_FlanneryGymLeaderGoneScene)
	}
	elif (var(VAR_LAVARIDGE_TOWN_STATE) == 1) {
		msgbox(format("The gym leader hasn't come back yet… How about we have a go at it again?"), MSGBOX_YESNO)
		if (var(VAR_RESULT) == YES) {
			goto(LavaridgeTown_EventScript_RuthBattle)
		}
	}
	release
	end
}

script LavaridgeTown_EventScript_FlanneryGymLeaderGoneScene {
	lock
	closemessage
	delay(16)
	applymovement(LOCALID_FLANNERY, LavaridgeTown_Movement_FlanneryApproachGym)
	waitmovement(0)
	applymovement(LOCALID_RUTH, LavaridgeTown_Movement_RuthNoticeFlannery)
	playse(SE_PIN)
	waitmovement(0)
	speakername(CommonName_Ruth)
	msgbox(format("Flannery?!"))
	closemessage
	turnobject(OBJ_EVENT_ID_PLAYER, DIR_EAST)
	getplayerxy(VAR_0x8008, VAR_0x8009)
	if (var(VAR_0x8008) == 5) {
		applymovement(LOCALID_RUTH, LavaridgeTown_Movement_RuthApproachFlannery_1)
	}
	else { 
		applymovement(LOCALID_RUTH, LavaridgeTown_Movement_RuthApproachFlannery_2)
	}
	waitmovement(0)
	turnobject(OBJ_EVENT_ID_PLAYER, DIR_EAST)
	speakername(CommonName_Ruth)
	msgbox(format("What are you doing here?\pAren't you really busy with your new job?"))
	closemessage
	applymovement(LOCALID_FLANNERY, Common_Movement_WalkInPlaceLeft)
	waitmovement(0)
	speakername(CommonName_Flannery)
	msgbox(format("Haha, the new gym leader asked me to help her out with some ruffians.\p"
		"But! Ruth! Auntie told me you're collecting badges now?\p"
		"Haha, to think last year you would've had to face me here!\p"
		"I would've grilled you!"))
	closemessage
	applymovement(LOCALID_RUTH, Common_Movement_WalkInPlaceRight)
	waitmovement(0)
	speakername(CommonName_Ruth)
	msgbox(format("Psh, just you wait! I'll put out that fire of yours some day!"))
	applymovement(LOCALID_RUTH, Common_Movement_WalkInPlaceLeft)
	msgbox(format("Ah, right! {PLAYER}!"))
	closemessage
	if (var(VAR_0x8008) == 5) {
		applymovement(OBJ_EVENT_ID_PLAYER, LavaridgeTown_Movement_PlayerApproachFlannery_1)
	}
	elif (var(VAR_0x8008) == 4) {
		applymovement(OBJ_EVENT_ID_PLAYER, LavaridgeTown_Movement_PlayerApproachFlannery_2)
	}
	else {
		applymovement(OBJ_EVENT_ID_PLAYER, LavaridgeTown_Movement_PlayerApproachFlannery_3)
	}
	waitmovement(0)
	turnobject(LOCALID_RUTH, DIR_SOUTH)
	speakername(CommonName_Ruth)
	msgbox(format("You remember my cousin Flannery, right?\pShe was the gym leader of Lavaridge Town until a while ago."))
	closemessage
	applymovement(LOCALID_FLANNERY, Common_Movement_WalkInPlaceLeft)
	waitmovement(0)
	turnobject(OBJ_EVENT_ID_PLAYER, DIR_EAST)
	turnobject(LOCALID_RUTH, DIR_EAST)
	speakername(CommonName_Flannery)
	msgbox(format("Ah, {PLAYER}! You're Ruth's neighbour, right?"))
	closemessage
	applymovement(LOCALID_RUTH, Common_Movement_WalkInPlaceRight)
	speakername(CommonName_Ruth)
	msgbox(format("Yes! {PLAYER} is also challenging the gyms! We're competing!\p"
		"That reminds me, Flanny, do you know where the new gym leader is? The gym door is locked."))
	closemessage
	applymovement(LOCALID_FLANNERY, Common_Movement_WalkInPlaceLeft)
	waitmovement(0)
	speakername(CommonName_Flannery)
	msgbox(format("Huh? She's not inside?"))
	turnobject(LOCALID_FLANNERY, DIR_EAST)
	msgbox(format("That means she must've already left for Mt. Chimney!"))
	closemessage
	applymovement(LOCALID_FLANNERY, LavaridgeTown_Movement_FlanneryLeave_1)
	waitmovement(0)
	speakername(CommonName_Ruth)
	msgbox(format("Oh, yes. {PLAYER}, Ruth… Why don't you two check the hot springs until we got that thing sorted?"), MSGBOX_AUTOCLOSE)
	applymovement(LOCALID_FLANNERY, LavaridgeTown_Movement_FlanneryLeave_2)
	waitmovement(0)
	setflag(TEMP_FLAG_HIDE_FLANNERY)
	removeobject(LOCALID_FLANNERY)
	setvar(VAR_LAVARIDGE_TOWN_STATE, 1)
	delay(30)
	applymovement(LOCALID_RUTH, Common_Movement_WalkInPlaceRight)
	waitmovement(0)
	speakername(CommonName_Ruth)
	msgbox(format("There she goes…"))
	applymovement(LOCALID_RUTH, Common_Movement_WalkInPlaceDown)
	waitmovement(0)
	turnobject(OBJ_EVENT_ID_PLAYER, DIR_NORTH)
	msgbox(format("… I don't feel like lazing around in the hot springs.\p{PLAYER}, care for a quick battle to pass the time?"))
	goto(LavaridgeTown_EventScript_RuthBattle)
	release
	end
}

script LavaridgeTown_EventScript_RuthBattle {
	switch (var(VAR_STARTER_MON)) {
			case 0:
				trainerbattle_no_intro(TRAINER_RUTH_LAVARIDGE_TOXATIEL, LavaridgeTown_Text_RuthDefeat)
			case 1:
				trainerbattle_no_intro(TRAINER_RUTH_LAVARIDGE_GROCKO, LavaridgeTown_Text_RuthDefeat)
			case 2:
				trainerbattle_no_intro(TRAINER_RUTH_LAVARIDGE_MERAKID, LavaridgeTown_Text_RuthDefeat)
	}	
	goto(LavaridgeTown_EventScript_AfterRuthBattle)
}

script LavaridgeTown_EventScript_AfterRuthBattle {
	lock
	speakername(CommonName_Ruth)
	msgbox(format("Ah, I thought I could beat you this time.\p"
		"Looks like I need to step up my game a little bit more to win against you!\p"
		"I am confident in my abilities to beat the gym leader, though.\p"
		"…\p"
		"I don't feel like waiting here until they're done. {PLAYER}, let's go look for them!\p"
		"Flannery said they're at Mt. Chimney, right?"), MSGBOX_AUTOCLOSE)
	getplayerxy(VAR_0x8008, VAR_0x8009)
	if (var(VAR_0x8008) == 7 && var(VAR_0x8009) == 17) {
		applymovement(LOCALID_RUTH, LavaridgeTown_Movement_RuthLeave_3)
	}
	if (var(VAR_0x8008) == 5 && var(VAR_0x8009) == 16) {
		applymovement(LOCALID_RUTH, LavaridgeTown_Movement_RuthLeave_1)
	}
	else {
		applymovement(LOCALID_RUTH, LavaridgeTown_Movement_RuthLeave_2)
	}
	waitmovement(0)
	removeobject(LOCALID_RUTH)
	setvar(VAR_LAVARIDGE_TOWN_STATE, 2)
	setflag(FLAG_DEFEATED_RIVAL_2)
	release
	end
}

movement LavaridgeTown_Movement_FlanneryApproachGym {
	walk_down * 6
	walk_left
}

movement LavaridgeTown_Movement_FlanneryApproachPlayer {
	walk_left *2
}

movement LavaridgeTown_Movement_FlanneryLeave_1 {
	walk_fast_right *1
	walk_fast_up
	walk_up
	delay_16
	delay_16
	walk_down
}

movement LavaridgeTown_Movement_FlanneryLeave_2 {
	walk_fast_up*4
}

movement LavaridgeTown_Movement_RuthNoticeFlannery {
	walk_in_place_fast_right
	emote_exclamation_mark
	delay_16*4
}

movement LavaridgeTown_Movement_RuthApproachFlannery_1 {
	walk_fast_down
	walk_fast_right*2
	walk_fast_up
	walk_fast_right
}

movement LavaridgeTown_Movement_RuthApproachFlannery_2 {
	walk_fast_right *3
}

movement LavaridgeTown_Movement_PlayerApproachFlannery_1 {
	walk_down
	walk_right *2
	face_up
}

movement LavaridgeTown_Movement_PlayerApproachFlannery_2 {
	walk_right *2
	face_up
}

movement LavaridgeTown_Movement_PlayerApproachFlannery_3 {
	walk_down
	walk_right*3
	face_up
}

movement LavaridgeTown_Movement_RuthLeave_1 {
	walk_down
	walk_right *5
	walk_up *7
}

movement LavaridgeTown_Movement_RuthLeave_2 {
	walk_right *5
	walk_up *6
}

movement LavaridgeTown_Movement_RuthLeave_3 {
	walk_right *2
	walk_up *6
}

text LavaridgeTown_Text_RuthDefeat {
	format("Damn, I thought I could win this one.")
}