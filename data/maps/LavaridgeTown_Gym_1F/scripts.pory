raw `
LavaridgeTown_Gym_1F_MapScripts::
	map_script MAP_SCRIPT_ON_TRANSITION, LavaridgeTown_Gym_1F_OnTransition
	.byte 0

LavaridgeTown_Gym_1F_EventScript_FlanneryDefeated::
	message LavaridgeTown_Gym_1F_Text_ReceivedHeatBadge
	waitmessage
	call Common_EventScript_PlayGymBadgeFanfare
	msgbox LavaridgeTown_Gym_1F_Text_ExplainHeatBadgeTakeThis, MSGBOX_DEFAULT
	setflag FLAG_WHITEOUT_TO_LAVARIDGE
	setflag FLAG_DEFEATED_LAVARIDGE_GYM
	setflag FLAG_BADGE04_GET
	addvar VAR_PETALBURG_GYM_STATE, 1
	call_if_eq VAR_PETALBURG_GYM_STATE, 6, Common_EventScript_ReadyPetalburgGymForBattle
	setvar VAR_0x8008, 4
	call Common_EventScript_SetGymTrainers
	setflag FLAG_HIDE_VERDANTURF_TOWN_WANDAS_HOUSE_WALLY
	setvar VAR_LAVARIDGE_TOWN_STATE, 1
	call LavaridgeTown_Gym_1F_EventScript_GiveOverheat
	closemessage
	delay 30
	playfanfare MUS_REGISTER_MATCH_CALL
	msgbox LavaridgeTown_Gym_1F_Text_RegisteredFlannery, MSGBOX_DEFAULT
	waitfanfare
	closemessage
	delay 30
	setflag FLAG_ENABLE_FLANNERY_MATCH_CALL
	release
	end

LavaridgeTown_Gym_1F_EventScript_GiveOverheat2::
	giveitem ITEM_TM_OVERHEAT
	goto_if_eq VAR_RESULT, FALSE, Common_EventScript_ShowBagIsFull
	msgbox LavaridgeTown_Gym_1F_Text_ExplainOverheat, MSGBOX_DEFAULT
	setflag FLAG_RECEIVED_TM_OVERHEAT
	release
	end

LavaridgeTown_Gym_1F_EventScript_GiveOverheat::
	giveitem ITEM_TM_OVERHEAT
	goto_if_eq VAR_RESULT, FALSE, Common_EventScript_BagIsFull
	msgbox LavaridgeTown_Gym_1F_Text_ExplainOverheat, MSGBOX_DEFAULT
	setflag FLAG_RECEIVED_TM_OVERHEAT
	return

LavaridgeTown_Gym_1F_EventScript_FlanneryRematch::
	trainerbattle_rematch_double TRAINER_MAY_1, LavaridgeTown_Gym_1F_Text_FlanneryPreRematch, LavaridgeTown_Gym_1F_Text_FlanneryRematchDefeat, LavaridgeTown_Gym_1F_Text_FlanneryRematchNeedTwoMons
	msgbox LavaridgeTown_Gym_1F_Text_FlanneryPostRematch, MSGBOX_AUTOCLOSE
	end

LavaridgeTown_Gym_1F_EventScript_GymGuidePostVictory::
	msgbox LavaridgeTown_Gym_1F_Text_GymGuidePostVictory, MSGBOX_DEFAULT
	release
	end

LavaridgeTown_Gym_1F_EventScript_LeftGymStatue::
	lockall
	goto_if_set FLAG_BADGE04_GET, LavaridgeTown_Gym_1F_EventScript_GymStatueCertified
	goto LavaridgeTown_Gym_1F_EventScript_GymStatue
	end

LavaridgeTown_Gym_1F_EventScript_RightGymStatue::
	lockall
	goto_if_set FLAG_BADGE04_GET, LavaridgeTown_Gym_1F_EventScript_GymStatueCertified
	goto LavaridgeTown_Gym_1F_EventScript_GymStatue
	end

LavaridgeTown_Gym_1F_EventScript_GymStatueCertified::
	msgbox LavaridgeTown_Gym_1F_Text_GymStatueCertified, MSGBOX_DEFAULT
	releaseall
	end

LavaridgeTown_Gym_1F_EventScript_GymStatue::
	msgbox LavaridgeTown_Gym_1F_Text_GymStatue, MSGBOX_DEFAULT
	releaseall
	end

LavaridgeTown_Gym_1F_Text_GymGuidePostVictory:
	.string "Yow! That was a scorching-hot battle!$"

LavaridgeTown_Gym_1F_Text_AxleIntro:
	.string "I'm trying to relieve my stress.\n"
	.string "Don't come along and stress me out!$"

LavaridgeTown_Gym_1F_Text_AxleDefeat:
	.string "I hope FLANNERY flames you good!$"

LavaridgeTown_Gym_1F_Text_AxlePostBattle:
	.string "Haaah… Whew…\p"
	.string "If you spend too much time buried in\n"
	.string "hot sand, it tuckers you out…$"

LavaridgeTown_Gym_B1F_Text_KeeganIntro:
	.string "You must be getting tired by now.\n"
	.string "You'd like to rest in the hot sand,\l"
	.string "wouldn't you?\p"
	.string "But you should know that maintaining\n"
	.string "your willpower is an important ability\l"
	.string "for all TRAINERS.$"

LavaridgeTown_Gym_B1F_Text_KeeganDefeat:
	.string "Play with fire, and be burned…$"

LavaridgeTown_Gym_B1F_Text_KeeganPostBattle:
	.string "Your skill is real…\n"
	.string "But our LEADER FLANNERY is strong.\p"
	.string "If you don't watch yourself, you'll be\n"
	.string "burned seriously.$"

LavaridgeTown_Gym_B1F_Text_JeffIntro:
	.string "See how the flames blaze wildly?\n"
	.string "They flare in anticipation of my win!$"

LavaridgeTown_Gym_B1F_Text_JeffDefeat:
	.string "Something didn't go right.$"

LavaridgeTown_Gym_B1F_Text_JeffPostBattle:
	.string "Well, so what? I say so what?\n"
	.string "I can walk on hot coals barefoot!\p"
	.string "…Don't even think about trying it!$"

LavaridgeTown_Gym_1F_Text_FlanneryDefeat:
	.string "Oh…\n"
	.string "I guess I was trying too hard…\p"
	.string "I… I've only recently become\n"
	.string "a GYM LEADER.\p"
	.string "I tried too hard to be someone\n"
	.string "I'm not.\p"
	.string "I have to do things my natural way. If\n"
	.string "I don't, my POKéMON will be confused.\p"
	.string "Thanks for teaching me that.\n"
	.string "For that, you deserve this.$"

LavaridgeTown_Gym_1F_Text_ReceivedHeatBadge:
	.string "{PLAYER} received the HEAT BADGE\n"
	.string "from FLANNERY.$"

LavaridgeTown_Gym_1F_Text_ExplainHeatBadgeTakeThis:
	.string "If you have a HEAT BADGE, all POKéMON\n"
	.string "up to Level 50, even those you get in\l"
	.string "trades from other people, will obey\l"
	.string "you completely.\p"
	.string "And, it lets POKéMON use the HM move\n"
	.string "STRENGTH outside of battle.\p"
	.string "This is a token of my appreciation.\n"
	.string "Don't be shy about taking it!$"

LavaridgeTown_Gym_1F_Text_ExplainOverheat:
	.string "That TM50 contains OVERHEAT.\p"
	.string "That move inflicts serious damage on\n"
	.string "the opponent.\p"
	.string "But it also sharply cuts the SP. ATK\n"
	.string "of the POKéMON using it. It might not\l"
	.string "be suitable for longer battles.$"

LavaridgeTown_Gym_1F_Text_RegisteredFlannery:
	.string "Registered GYM LEADER FLANNERY\n"
	.string "in the POKéNAV.$"

LavaridgeTown_Gym_1F_Text_FlanneryPostBattle:
	.string "Your power reminds me of someone…\p"
	.string "Oh! I know! You battle like NORMAN,\n"
	.string "the GYM LEADER of PETALBURG.$"

LavaridgeTown_Gym_1F_Text_GymStatue:
	.string "LAVARIDGE TOWN POKéMON GYM$"

LavaridgeTown_Gym_1F_Text_GymStatueCertified:
	.string "LAVARIDGE TOWN POKéMON GYM\p"
	.string "FLANNERY'S CERTIFIED TRAINERS:\n"
	.string "{PLAYER}$"

LavaridgeTown_Gym_1F_Text_FlanneryPreRematch:
	.string "FLANNERY: Losing a battle isn't going\n"
	.string "to deflate me.\p"
	.string "I love POKéMON.\n"
	.string "I love to battle.\l"
	.string "And… I love this GYM!\p"
	.string "Let's exchange superhot moves\n"
	.string "in another battle!$"

LavaridgeTown_Gym_1F_Text_FlanneryRematchDefeat:
	.string "Whew!\n"
	.string "On the verge of eruption!$"

LavaridgeTown_Gym_1F_Text_FlanneryPostRematch:
	.string "FLANNERY: I lost the match,\n"
	.string "but I'm completely satisfied.\p"
	.string "It's not often I get to enjoy a battle\n"
	.string "this heated.\p"
	.string "Let's have another one like this\n"
	.string "again sometime!$"

LavaridgeTown_Gym_1F_Text_FlanneryRematchNeedTwoMons:
	.string "FLANNERY: Losing a battle isn't going\n"
	.string "to deflate me.\p"
	.string "I love POKéMON.\n"
	.string "I love to battle.\l"
	.string "And… I love this GYM!\p"
	.string "Let's exchange superhot moves\n"
	.string "in another battle!\p"
	.string "Oh, wait. Do you only have one POKéMON\n"
	.string "that can battle?\p"
	.string "I hate to say this, but when you come\n"
	.string "see me, bring at least two POKéMON.$"
`

script LavaridgeTown_Gym_1F_OnTransition{
	setflag(FLAG_SYS_USE_STRENGTH)
}

script LavaridgeTown_Gym_EventScript_May {
	lock	
	faceplayer
	if (!defeated(TRAINER_MAY_1)) {
		speakername(CommonName_May)
		msgbox(LavaridgeTown_Gym_1F_Text_MayIntro)
		special(SavePlayerParty)
		getpartysize
		if (var(VAR_RESULT) <= 3) {
			special(SetHalfPartyForBattle)
			goto(LavaridgeTown_Gym_EventScript_MayGymBattle_CheckConfirmSmallParty)
		}
		else {
			speakername(CommonName_May)
			msgbox(format("Alright, which Pokémon will you be fighting with?"))
			fadescreen(FADE_TO_BLACK)
			special(ChooseHalfPartyForBattle)
			waitstate
			if (var(VAR_RESULT) != 0) {
				goto(LavaridgeTown_Gym_EventScript_MayGymBattle_CheckConfirmSmallParty)
			}
			special(LoadPlayerParty)
			release
			end
		}
	}
	//specialvar(VAR_RESULT, ShouldTryRematchBattle)
	//goto_if_eq(VAR_RESULT, TRUE, LavaridgeTown_Gym_1F_EventScript_FlanneryRematch)
	msgbox(LavaridgeTown_Gym_1F_Text_MayPostBattle, MSGBOX_DEFAULT)
	closemessage
	release
	end
}

script LavaridgeTown_Gym_EventScript_MayGymBattle_CheckConfirmSmallParty {
	lock
	special(ReducePlayerPartyToSelectedMons)
	getpartysize
	if (var(VAR_RESULT) < 3) {
		speakername(CommonName_May)
		msgbox(format("Are you really sure you want to battle with less than three Pokémon?\pYou won't get extra points for that, you know."), MSGBOX_YESNO)
		if (var(VAR_RESULT) == YES) {
			goto(LavaridgeTown_Gym_EventScript_MayGymBattle) 
		}
		else {
			special(LoadPlayerParty)
			release
			end
		}
	}
	else {
		goto(LavaridgeTown_Gym_EventScript_MayGymBattle)
	}
}

script LavaridgeTown_Gym_EventScript_MayGymBattle {
	setflag(FLAG_LOAD_SAVED_PARTY_AFTER_NEXT_BATTLE)
	trainerbattle_single(
		TRAINER_MAY_1, 
		LavaridgeTown_Gym_Text_MayBeforeBattle, 
		LavaridgeTown_Gym_Text_MayDefeat, 
		LavaridgeTown_Gym_EventScript_MayAfterBattle, 
		NO_MUSIC)
}

script LavaridgeTown_Gym_EventScript_MayAfterBattle {
	lock
	special(LoadPlayerParty)
	clearflag(FLAG_LOAD_SAVED_PARTY_AFTER_NEXT_BATTLE)
	speakername(NULL)
	message("{PLAYER} received the Heat Badge\nfrom May.")
	waitmessage
	call(Common_EventScript_PlayGymBadgeFanfare)
	setflag(FLAG_DEFEATED_LAVARIDGE_GYM)
	setflag(FLAG_BADGE04_GET)
	setvar(VAR_JAGGED_PASS_STATE, 4)
	setvar(VAR_0x8008, 4)
	call(Common_EventScript_SetGymTrainers)
	speakername(CommonName_May)
	msgbox("I think you earned this TM too!", MSGBOX_DEFAULT)
	speakername(NULL)
	giveitem(ITEM_TM_FIRE_PUNCH)
	speakername(CommonName_May)
	msgbox(format("TM51 contains Fire Punch.\p"
		"It's a strong Fire-type attack that can also burn the target.\p"
		"A lot of non-Fire type Pokémon can learn it, so you can surprise your opponent by hitting them with an unexpected super-effective Fire move!"))
	closemessage
	delay(30)
	speakername(CommonName_May)
	msgbox(format("… Say, {PLAYER}, could I ask a favour?\p"
		"That encounter with Team Magma at Jagged Pass still bothers me.\p"
		"Could you deliver something to the Weather Institute on Route 119 for me?\p"
		"It'll be right on your way when you go to Fortree City to challenge Winona's gym."))
	closemessage
	speakername(NULL)
	giveitem(ITEM_MAYS_PACKAGE)
	speakername(CommonName_May)
	msgbox(format("The safest way to reach Fortree City at the moment…\pThat should be the tunnel connecting Route 119 and the northern part of Route 111.\p"
		"You can get there by going past Jagged Pass, then take a turn east as soon as you exit the forest."))
	closemessage
	delay(30)
	speakername(NULL)
	playfanfare(MUS_REGISTER_MATCH_CALL)
	msgbox("Registered Gym Leader May\nin the PokéNav.", MSGBOX_DEFAULT)
	waitfanfare
	closemessage
	delay(30)
	//setflag(FLAG_ENABLE_FLANNERY_MATCH_CALL)
	release
	end
}

script LavaridgeTown_Gym_1F_EventScript_GymGuide {
	lock
	faceplayer
	goto_if_set(FLAG_DEFEATED_LAVARIDGE_GYM, LavaridgeTown_Gym_1F_EventScript_GymGuidePostVictory)
	msgbox(LavaridgeTown_Gym_1F_Text_GymGuideAdvice, MSGBOX_DEFAULT)
	release
	end
}

//hiker
script LavaridgeTown_Gym_EventScript_Cole {
	trainerbattle_single(TRAINER_COLE, format("These boulder puzzles are really neat, don't you think?"), format("Hmmm… If I rolled that boulder over there…"))
	msgbox(format("Those long boulders can only roll in one direction.\pIt's tricky to get the small boulder past them."), MSGBOX_AUTOCLOSE)
	end
}

//battle girl
script LavaridgeTown_Gym_EventScript_Danielle {
	trainerbattle_single(TRAINER_DANIELLE, format("The hot water is so soothing for sore muscles…"), format("Ow… I think my shoulder still hurts a bit…"))
	msgbox(format("The hot spring water relaxes muscles and promotes circulation.\pI can train a lot more thanks to that!"), MSGBOX_AUTOCLOSE)
	end
}

//kindler
script LavaridgeTown_Gym_EventScript_Gerald {
	trainerbattle_single(TRAINER_GERALD, format("Can your Pokémon withstand the scalding heat?"), format("It didn't burn hot enough…"))
	msgbox(format("Your Pokémon seem to be entirely fireproof."), MSGBOX_AUTOCLOSE)
	end
}

//tuber
script LavaridgeTown_Gym_EventScript_Jace {
	trainerbattle_single(TRAINER_JACE, format("Auntie May always lets me swim in here.\pCome on, play with me!"), format("That was fun!"))
	msgbox(format("Look, I've got this entire pool all for myself!\pBut you want to, I can share with you!"), MSGBOX_AUTOCLOSE)
	end
}

//beauty
script LavaridgeTown_Gym_EventScript_Eli {
	trainerbattle_single(TRAINER_ELI, format("Nothing beats hot springs when it comes to natural skin cleanses."), format("The heat must've made me feel light-headed…"))
	msgbox(format("The minerals in the spring water are good for your skin."), MSGBOX_AUTOCLOSE)
	end
}

//unused
script LavaridgeTown_Gym_EventScript_Axle {
	trainerbattle_single(TRAINER_AXLE, LavaridgeTown_Gym_1F_Text_AxleIntro, LavaridgeTown_Gym_1F_Text_AxleDefeat)
	msgbox(LavaridgeTown_Gym_1F_Text_AxlePostBattle, MSGBOX_AUTOCLOSE)
	end
}

//unused
script LavaridgeTown_Gym_EventScript_Keegan {
	trainerbattle_single(TRAINER_KEEGAN, LavaridgeTown_Gym_B1F_Text_KeeganIntro, LavaridgeTown_Gym_B1F_Text_KeeganDefeat)
	msgbox(LavaridgeTown_Gym_B1F_Text_KeeganPostBattle, MSGBOX_AUTOCLOSE)
	end
}

//unused
script LavaridgeTown_Gym_EventScript_Jeff {
	trainerbattle_single(TRAINER_JEFF, LavaridgeTown_Gym_B1F_Text_JeffIntro, LavaridgeTown_Gym_B1F_Text_JeffDefeat)
	msgbox(LavaridgeTown_Gym_B1F_Text_JeffPostBattle, MSGBOX_AUTOCLOSE)
	end
}

text LavaridgeTown_Gym_1F_Text_MayIntro {
	format("Welcome, {PLAYER}! You made it!\p"
	"Since we meet in this official manner, let's do the introductions properly!\p"
	"My name's May, and it's always been my dream to become a gym leader like my father.\p"
	"One thing led to another, and I was able to take over this gym for Flannery.\p"
	"{PLAYER}, you somehow remind me of myself when I started my own adventure a few years ago.\p"
	"That doesn't mean I'll be going easy on you, though!")
} 

text LavaridgeTown_Gym_Text_MayBeforeBattle {
	format("…")
}

text LavaridgeTown_Gym_Text_MayDefeat {
	format("…")
}

text LavaridgeTown_Gym_1F_Text_MayPostBattle {
	format("…")
}

text LavaridgeTown_Gym_1F_Text_GymGuideAdvice {
	"Hey, how's it going, {PLAYER}?\p"
	"Our new Gym Leader May uses Fire-type Pokémon, just like Flannery used to.\p"
	"You'll need Pokémon that can withstand the scorching heat!\p"
	"Ground-, Rock- and Water-type attacks can extinguish her flames…\p"
	"But be careful, as a former champion, she packs moves that can counter those weaknesses!"
}